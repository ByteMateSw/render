# SymmetricDS Server Configuration for PostgreSQL Master Node on Render.com
# ===============================================================================
# NOTA: Este nodo maestro debe desplegarse en Render.com como servicio web Java
# Comando de inicio: bin/sym_service -engine config_sync/engines/supabase-server.properties start
# Puerto expuesto: 8080 (mapeado a HTTPS público)

# Configuración del Motor
engine.name=supabase-server

# Configuración del Nodo
group.id=server
external.id=server-001
sync.url=https://symmetricds-j1ak.onrender.com/sync/supabase-server

# Configuración de Base de Datos PostgreSQL
# IMPORTANTE: Editar estos valores con los datos reales de PostgreSQL en la nube
db.driver=org.postgresql.Driver
# IMPORTANTE: Reemplazar con las credenciales reales de Supabase
db.url=jdbc:postgresql://aws-0-us-east-1.pooler.supabase.com:6543/postgres?sslmode=require
db.user=postgres.your_project_ref
db.password=your_supabase_password

# Pool de Conexiones
db.pool.initial.size=5
db.pool.max.size=50
db.pool.min.idle=5
db.pool.max.idle=10
db.pool.max.wait=30000
db.pool.test.on.borrow=true
db.pool.test.on.return=false
db.pool.test.while.idle=true
db.pool.validation.query=select 1

# Configuración SSL para PostgreSQL
db.ssl=true
db.ssl.factory=org.postgresql.ssl.NonValidatingFactory

# Auto-registro (DESHABILITADO en el servidor maestro)
auto.registration=false
registration.url=

# Jobs de sincronización activos 24/7
start.route.job=true
start.outgoing.batches.job=true
start.incoming.batches.job=true
start.statistics.job=true
start.synctriggers.job=true
start.push.job=true
start.pull.job=true
start.heartbeat.job=true
start.purge.job=true
start.offline.push.job=false
start.offline.pull.job=false

# Configuración de Jobs
job.routing.period.time.ms=5000
job.outgoing.batches.period.time.ms=5000
job.incoming.batches.period.time.ms=5000
job.push.period.time.ms=10000
job.pull.period.time.ms=10000
job.heartbeat.period.time.ms=30000
job.purge.period.time.ms=43200000

# Configuración de Lotes
outgoing.batch.max.bytes.to.sync=1048576
incoming.batch.max.bytes.to.sync=1048576
outgoing.batch.max.count.to.sync=1000
incoming.batch.max.count.to.sync=1000

# Configuración de Red
http.timeout.ms=300000
http.concurrent.connections.per.pool=10
http.header.accept.charset=UTF-8

# Configuración de Seguridad
security.verify.hostname=false
https.allow.self.signed.certs=true

# Configuración Web (para Render.com)
web.enable=true
web.http.port=8080
web.context.path=/sync
web.base.url=https://sync.<TU_DOMINIO>.com

# Configuración de Log
log.level=INFO
console.log.level=INFO

# Configuración de Cache
cache.maximum.size=100000

# Configuración de Triggers
auto.config.database=true
auto.config.registration=true

# Configuración de Initial Load
initial.load.use.extract.job=true
initial.load.use.reload.channel=true
initial.load.extract.timeout.ms=7200000

# Configuración de Cluster (deshabilitado para single node)
cluster.locking.enabled=false

# JMX habilitado para monitoreo
jmx.agent.enable=true
jmx.agent.port=31416

# Configuración de transformaciones
transform.columns.enabled=true

# Configuración de archivos
sync.files.enabled=true
sync.files.max.size.bytes=10485760

# Configuración específica para PostgreSQL
db.native.extractor=false
db.treats.binary.as.lob=false
db.stream.binary.data=true
db.use.capture.lobs=false

# Configuración de estadísticas
statistic.record.enable=true
statistic.capture.time.in.ms=60000

# Configuración de Dead Letter
dead.letter.sync.on.error=false

# Configuración de parámetros específicos del motor
symmetric.runtime.config.table.prefix=sym_
symmetric.runtime.stats.enable=true
