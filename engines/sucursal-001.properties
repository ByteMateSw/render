# =====================================================================
# CONFIGURACIÓN SUCURSAL 001 - SymmetricDS Client
# =====================================================================
# Fecha de creación: $(date)
# Tipo: Cliente MySQL Local  
# Conexión a: Servidor maestro PostgreSQL en Render.com
# =====================================================================

# ============================================
# INFORMACIÓN DEL MOTOR Y NODO
# ============================================
engine.name=sucursal-001
group.id=sucursal
external.id=sucursal-001

# ============================================
# CONEXIÓN AL SERVIDOR MAESTRO
# ============================================
# URL del servidor maestro en Render.com
sync.url=https://symmetricds-j1ak.onrender.com/sync/sucursal-001
registration.url=https://symmetricds-j1ak.onrender.com/sync/supabase-server

# ============================================
# BASE DE DATOS MYSQL LOCAL
# ============================================
db.driver=com.mysql.cj.jdbc.Driver
db.url=jdbc:mysql://localhost:3306/sucursal_001?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=America/Argentina/Buenos_Aires&autoReconnect=true&failOverReadOnly=false&maxReconnects=10
db.user=root
db.password=aps22

# ============================================
# CONFIGURACIÓN DEL POOL DE CONEXIONES
# ============================================
db.pool.initial.size=2
db.pool.max.size=8
db.pool.min.idle=1
db.pool.max.idle=5
db.pool.max.wait=30000
db.pool.test.on.borrow=true
db.pool.test.while.idle=true
db.pool.test.on.return=false
db.pool.validation.query=SELECT 1
db.pool.time.between.eviction.runs.millis=300000
db.pool.min.evictable.idle.time.millis=600000

# ============================================
# CONFIGURACIÓN DE REGISTRO
# ============================================
# Auto-registro habilitado (primera vez)
auto.registration=true
auto.config.database=true
auto.config.registration=true

# ============================================
# JOBS DE SINCRONIZACIÓN ACTIVOS
# ============================================
start.route.job=true
start.outgoing.batches.job=true
start.incoming.batches.job=true
start.push.job=true
start.pull.job=true
start.heartbeat.job=true
start.purge.job=true
start.statistics.job=true
start.synctriggers.job=true

# ============================================
# FRECUENCIAS OPTIMIZADAS PARA SUCURSAL
# ============================================
# Frecuencias en milisegundos
job.pull.period.time.ms=10000
job.push.period.time.ms=10000
job.outgoing.batches.period.time.ms=10000
job.incoming.batches.period.time.ms=10000
job.route.period.time.ms=15000
job.heartbeat.period.time.ms=30000
job.statistics.period.time.ms=300000
job.purge.period.time.ms=3600000

# ============================================
# CONFIGURACIÓN WEB PARA MONITOREO
# ============================================
web.enable=true
web.http.port=8081
web.context.path=/sync
web.base.url=http://localhost:8081

# ============================================
# CONFIGURACIÓN DE LOGS
# ============================================
log.level=INFO
console.log.level=INFO
file.log.level=INFO

# ============================================
# CONFIGURACIÓN ESPECÍFICA MYSQL
# ============================================
db.native.extractor=false
db.treats.binary.as.lob=false
db.stream.binary.data=true
db.use.capture.lobs=false
db.use.stream.lobs=false

# ============================================
# CONFIGURACIÓN DE LOTES
# ============================================
# Tamaños de lotes optimizados para sucursal
outgoing.batch.max.bytes.to.sync=262144
incoming.batch.max.bytes.to.sync=262144
outgoing.batch.max.count.to.sync=1000
incoming.batch.max.count.to.sync=1000
batch.to.send.count.max=100

# ============================================
# TIMEOUTS Y CONEXIONES HTTP
# ============================================
http.timeout.ms=60000
http.connection.timeout.ms=30000
http.read.timeout.ms=60000
http.basic.auth.username=
http.basic.auth.password=

# ============================================
# CONFIGURACIÓN DE CACHE
# ============================================
cache.maximum.size=10000
cache.timeout.ms=600000

# ============================================
# CONFIGURACIÓN DE REINTENTOS
# ============================================
# Reintentos automáticos
push.retry.count=3
pull.retry.count=3
batch.retry.count=3

# ============================================
# CONFIGURACIÓN DE CONFLICTOS
# ============================================
# Resolución de conflictos: manual, newer_wins, older_wins
conflict.detection.enabled=true
conflict.loser.action=newer_wins

# ============================================
# CONFIGURACIÓN ESPECÍFICA DE SUCURSAL
# ============================================
# Identificación de sucursal
initial.load.delete.first=false
initial.load.reverse.initial.load=true
initial.load.use.extract.job=true

# ============================================
# CONFIGURACIÓN DE SEGURIDAD
# ============================================
# Sin autenticación básica por ahora
basic.auth.username=
basic.auth.password=

# ============================================
# CONFIGURACIÓN AVANZADA
# ============================================
# Configuraciones específicas para el entorno
db.tx.timeout.seconds=300
db.connection.properties=
db.validation.query.timeout=3

# ============================================
# CONFIGURACIÓN DE TRIGGERS
# ============================================
# Los triggers se crearán automáticamente
auto.sync.triggers=true
auto.sync.triggers.at.startup=true

# ============================================
# FIN DE CONFIGURACIÓN
# ============================================
